# 📦 货物打包管理系统

一个简单易用的本地Web应用，直接显示Google Form的所有原始数据，帮助您高效追踪货物打包进度。

## ✨ 功能特点

- ✅ **完整数据显示** - 显示CSV文件的所有原始列和数据
- 📄 **动态表头** - 自动识别并显示CSV的所有列名
- 🔍 **全局搜索** - 在所有列中快速搜索任何内容
- 📊 **实时统计** - 查看总订单数、待打包数和已打包数
- 📝 **状态管理** - 轻松标记订单打包状态
- 💾 **数据持久化** - 自动保存到浏览器本地存储
- 📥 **完整导出** - 导出所有原始数据+打包状态
- 🎨 **现代化界面** - 美观易用的响应式设计
- 📱 **手机支持** - 完美支持手机浏览器使用

## 🚀 使用方法

### 桌面端使用

#### 1. 打开应用

直接双击 `index.html` 文件，它会在您的默认浏览器中打开。

### 📱 手机端使用

#### 方法一：通过文件管理器（推荐）

1. **导出CSV文件**：
   - 在Google Form的"回复"中点击"下载回复(.csv)"
   - 将CSV文件保存到手机（下载文件夹或文档文件夹）

2. **传输文件**（如果在电脑上导出）：
   - 使用USB线、云存储、邮件或微信/QQ传输到手机

3. **打开应用**：
   - 将整个文件夹复制到手机
   - 用文件管理器找到`index.html`
   - 点击文件，选择用浏览器打开（Chrome或Safari）

4. **导入文件**：
   - 点击"📄 导入CSV文件"按钮
   - 选择您保存的CSV文件

#### 方法二：直接在手机上操作

1. 在手机上打开Google Form的回复
2. 点击"在Google Sheets中查看"
3. 导出为CSV文件
4. 在应用中导入文件

💡 **提示**：点击应用中的"📱 手机使用帮助"按钮查看详细指南！

### 2. 导入Google Form数据

1. 从Google Form导出CSV文件
2. 点击"📄 导入CSV文件"按钮
3. 选择一个或多个CSV文件
4. 数据会自动导入并显示

### 3. 查看数据

导入后，表格会显示：
- **序号列**：订单编号
- **所有CSV原始列**：完整显示CSV文件的所有列和数据
- **打包状态列**：显示当前打包状态
- **操作列**：标记打包或撤销操作

### 4. 管理订单

- **搜索订单**: 在搜索框输入关键词（在所有列中搜索）
- **筛选状态**: 使用下拉菜单筛选"待打包"或"已打包"订单
- **筛选类型**: 使用下拉菜单筛选"Pickup"或"Delivery"订单
- **标记打包**: 点击"✓ 已打包"按钮更新订单状态
- **撤销操作**: 点击"↩ 撤销"将已打包订单改回待打包状态

### 5. 导出数据

点击"📥 导出已打包列表"按钮，将已打包的订单（包含所有原始列+打包状态）导出为CSV文件。

### 6. 调试功能

点击"🔍 查看调试信息"按钮，查看当前数据解析状态和订单样本。

### 7. 清空数据

点击"🗑️ 清空所有数据"按钮（需要确认），清除所有订单记录。

## 📋 CSV文件支持

应用采用**完整数据显示**方式，直接显示CSV文件的所有原始数据！

### 🎯 支持特性

- ✅ **所有列都会显示**：不会隐藏或过滤任何列
- ✅ **原始数据保留**：完全保留CSV的原始内容
- ✅ **动态表头**：自动识别CSV的列名并显示
- ✅ **两行表头支持**：自动合并包含"Postage"等关键词的第二行表头
- ✅ **全局搜索**：可在所有列中搜索任何内容
- ✅ **换行符支持**：正确处理单元格内的换行符（如多行商品列表）
- ✅ **特殊字符支持**：正确处理引号、逗号等特殊字符
- ✅ **数据验证**：自动检测并报告数据问题

### 📝 支持的Google Form格式

支持任何Google Form导出的CSV文件：
- Cheki Preorder格式
- 海报格式（支持多列商品）
- 包含换行符的多行数据
- 任何自定义格式

### 🔧 已解决的问题

- ✅ 修复：单元格内换行符导致数据分行显示的问题
- ✅ 修复：引号内逗号导致列错位的问题
- ✅ 修复：特殊字符导致解析失败的问题
- ✅ 增强：完整的错误处理和提示

**现在可以正确处理任何复杂的CSV文件！**

## 💡 使用技巧

1. **多次导入**: 可以多次导入不同时间的CSV文件，数据会自动合并
2. **数据保存**: 所有数据自动保存在浏览器本地，刷新页面也不会丢失
3. **批量管理**: 使用筛选功能快速查看待处理的订单
4. **搜索功能**: 支持搜索任何字段，包括商品信息和备注
5. **测试导入**: 可以使用提供的示例文件（`示例-cheki.csv` 和 `示例-海报.csv`）测试导入功能

## 🔧 技术说明

- **纯前端应用**: 无需服务器，完全本地运行
- **数据存储**: 使用浏览器LocalStorage保存数据
- **文件格式**: 支持UTF-8编码的CSV文件
- **浏览器兼容**: 支持所有现代浏览器（Chrome、Firefox、Edge、Safari等）

## 📁 文件结构

```
Cal/
├── index.html         # 主HTML文件
├── styles.css         # 样式文件
├── app.js             # 应用逻辑
├── README.md          # 说明文档
├── 示例-cheki.csv     # Cheki格式示例文件
└── 示例-海报.csv      # 海报格式示例文件
```

## ⚠️ 注意事项

1. **数据备份**: 虽然数据会自动保存，但建议定期导出重要数据
2. **浏览器兼容**: 确保使用现代浏览器以获得最佳体验
3. **文件编码**: Google Form导出的CSV文件应该是UTF-8编码
4. **数据安全**: 所有数据仅存储在本地浏览器，不会上传到任何服务器

## 🆘 常见问题

**Q: 数据会丢失吗？**  
A: 不会。数据保存在浏览器本地存储中，除非您手动清空浏览器数据或使用"清空所有数据"功能。

**Q: 可以同时管理多个订单吗？**  
A: 可以。导入的文件越多，管理的订单就越多，所有数据都会合并显示。

**Q: 如何在其他电脑上使用？**  
A: 将整个文件夹复制到其他电脑，双击打开index.html即可。注意不同电脑之间的数据不会同步。

**Q: 如何在手机上使用？**  
A: 1) 将CSV文件保存到手机；2) 用浏览器打开index.html；3) 点击导入按钮选择文件。点击应用中的"📱 手机使用帮助"查看详细步骤。

**Q: 手机浏览器不支持文件选择？**  
A: 推荐使用Chrome（Android）或Safari（iOS），这些浏览器对文件选择支持最好。

**Q: 数据可以备份吗？**  
A: 可以。使用"导出已打包列表"功能导出CSV文件即可备份数据。

**Q: 导入后显示很多"未知客户"怎么办？**  
A: 1) 点击"🔍 查看调试信息"按钮查看解析状态；2) 按F12打开浏览器控制台查看详细调试信息；3) 检查CSV文件格式是否正确。

## 📞 需要帮助？

如果您在使用过程中遇到任何问题，请检查：
1. CSV文件格式是否正确
2. 浏览器是否支持LocalStorage
3. 文件编码是否为UTF-8

---

祝您使用愉快！🎉

